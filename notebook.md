# 第四章

下达指令 

快捷键

1.Tab,具有“命令补全”和“文件补齐”的功能

2.ctrl+c,中断运行

3.ctrl+d,键盘输入结束

4.shift+pageUP/Down，翻页

 帮助

--help

 man page

info

File：代表这个info page的数据是来自info.info文件所提供的；

Node：代表目前的这个页面是属于Top节点。 意思是info.info内含有很多信息，而Top仅是info.info 文件内的一个节点内容而已；

Next：下一个节点的名称为Getting Started，你也可以按“N”到下个节点去； 

Up：回到上一层的节点总揽画面，你也可以按下“U”回到上一层； 

Prev：前一个节点。但由于Top是info.info的第一个节点，所以上面没有前一个节点的信息。

nano,文本编辑器

nano 文件名.txt，打开或新建
[ctrl]-G：取得线上说明（help）；

[ctrl]-X：离开naon软件，若有修改过文件会提示是否需要储存； 

[ctrl]-O：储存盘案，有权限的话就能够储存盘案了； 

[ctrl]-R：从其他文件读入数据，可以将某个文件的内容贴在本文件中； 

[ctrl]-W：搜寻字串；

[ctrl]-C：说明目前光标所在处的行数与列数等信息； 

[ctrl]-下划线：输入行号可以使光标快速移动；

[alt]-Y：校正语法功能打开或关闭（按一下开、再按一下关）；

[alt]-M：可以支持鼠标来移动光标的功能

关机

将数据同步写入硬盘中的指令： sync 

惯用的关机指令： shutdown 

重新开机，关机： reboot, halt, poweroff

# 第五章

文件权限

 第一个字符代表这个文件是“目录、文件或链接文件等等”：

当为[ d ]则是目录，例如上表文件名为“.config”的那一行； 

当为[ - ]则是文件，例如上表文件名为“initial-setup-ks.cfg”那一行； 

若是[ l ]则表示为链接文件（link file）； 

若是[ b ]则表示为设备文件里面的可供储存的周边设备（可随机存取设备）； 

若是[ c ]则表示为设备文件里面的序列埠设备，例如键盘、鼠标（一次性读取设备）。

第一组为“文件拥有者可具备的权限”，以“initial-setup-ks.cfg”那个文件为例， 该文件的拥 有者可以读写，但不可执行； 

第二组为“加入此群组之帐号的权限”； 

第三组为“非本人且没有加入本群组之其他帐号的权限”。

 字段含义

第二栏表示有多少文件名链接到此节点（i-node）

第三栏表示这个文件（或目录）的“拥有者帐号”

第四栏表示这个文件的所属群组

第五栏为这个文件的容量大小，默认单位为Bytes

第六栏为这个文件的创建日期或者是最近的修改日期

第七栏为这个文件的文件名

 改变文件权限

chgrp ：改变文件所属群组 

chown ：改变文件拥有者 

chmod ：改变文件的权限, SUID, SGID, SBIT等等的特性 

 数字类型改变文件权限

Linux文件的基本权限就有九个，分别是owner/group/others三种身份各有自己的 read/write/execute权限， 文件的权限字符为：“- rwxrwxrwx”， 

这九个权限是三个三个一组的，其中，我们可以使用数字来代表各个权限，各权限 

每种身份（owner/group/others）各自的三个权限（r/w/x）分数是需要累加的，

 符号类型改变文件权限

user （u）：具有可读、可写、可执行的权限； 

group 与 others （g/o）：具有可读与执行的权限

 对文件来讲，权限的性能为：

r：可读取此一文件的实际内容，如读取文本文件的文字内容等； 

w：可以编辑、新增或者是修改该文件的内容（但不含删除该文件）； 

x：该文件具有可以被系统执行的权

r （read contents in directory） 

w （modify contents of directory） 

x （access directory）
Linux文件名的限制为：单一文件或目录的最大容许文件名为 255 个英文字符或 128 个中文字符； 

/ （root, 根目录）：与开机系统有关；

/usr （unix software resource）：与软件安装/执行有关； 

/var （variable）：与系统运行过程有关。
根据FHS的官方文件指出， 他们的主要目的是希望让使用者可以了解到已安装软件通常放置于那个目录下

FHS订定出来的四种目录特色为：shareable, unshareable, static, variable等四类； 

FHS所定义的三层主目录为：/, /var, /usr三层； 

绝对路径文件名为从根目录 / 开始写起，否则都是相对路径的文件名。

# 第六章

绝对路径：“一定由根目录 / 写起”；相对路径：“不由 / 写起，而是由相对当前目录写起” 

特殊目录有：., .., -, ~, ~account需要注意； 

与目录相关的指令有：cd, mkdir, rmdir, pwd 等重要指令； 

rmdir 仅能删除空目录，要删除非空目录需使用“ rm -r ”指令； 

使用者能使用的指令是依据 PATH 变量所规定的目录去搜寻的； 

ls 可以检视文件的属性，尤其 -d, -a, -l 等选项特别重要 

文件的复制、删除、移动可以分别使用：cp, rm , mv等指令来操作； 

检查文件的内容（读档）可使用的指令包括有：cat, tac, nl, more, less, head, tail, od 等 cat -n 与 nl 均可显示行号，但默认的情况下，空白行会不会编号并不相同； 

touch 的目的在修改文件的时间参数，但亦可用来创建空文件； 

一个文件记录的时间参数有三种，分别是 access time（atime）, status time （ctime）, modification time（mtime），ls 默认显示的是 mtime。 

除了传统的rwx权限之外，在Ext2/Ext3/Ext4/xfs文件系统中，还可以使用chattr与lsattr设置及观察 隐藏属性。 

常见的包括只能新增数据的 +a 与完全不能更动文件的 +i 属性。 

新建文件/目录时，新文件的默认权限使用 umask 来规范。

默认目录完全权限为drwxrwxrwx， 文件 则为-rw-rw-rw-。 文件具有SUID的特殊权限时，代表当使用者执行此一binary程序时，在执行过程中使用者会暂时具有程序拥有者的权限 

目录具有SGID的特殊权限时，代表使用者在这个目录下面新建的文件之群组都会与该目录的群组名称 相同。 

目录具有SBIT的特殊权限时，代表在该目录下使用者创建的文件只有自己与root能够删除！

观察文件的类型可以使用 file 指令来观察； 

搜寻指令的完整文件名可用 which 或 type ，这两个指令都是通过 PATH 变量来搜寻文件名； 

搜寻文件的完整文件名可以使用 whereis 找特定目录或 locate 到数据库去搜寻，而不实际搜寻文件系统； 

利用 find 可以加入许多选项来直接查询文件系统，以获得自己想要知道的文件名

# 第七章

superblock：记录此 filesystem 的整体信息，包括inode/block的总量、使用量、剩余量，以及文件系统的格式与相关信息等； 

inode：记录文件的属性，一个文件占用一个inode，同时记录此文件的数据所在的block号码； 

block：实际记录文件的内容，若文件太大时，会占用多个block

Ext2 文件系统的数据存取为索引式文件系统（indexed allocation） 

需要磁盘重组的原因就是文件写入的 block 太过于离散了，此时文件读取的性能将会变的很差所致。 这个时候可以通过磁盘重组将同一个文件所属的 blocks 汇整在一起

Ext2文件系统主要有：boot sector, superblock, inode bitmap, block bitmap, inode table, data block 等六大部分

data block是用来放置文件内容数据地方，在Ext2文件系统中所支持的block大小有1K,2K及4K三种 

inode 记录文件的属性/权限等数据，其他重要项目为：每个 inode 大小均为固定，有128/256Bytes两种基本容量

每个文件都仅会占用一个inode； 因此文件系统能够创建的文件数量与inode的数量有关

文件的 block 在记录文件的实际数据，目录的block则在记录该目录下面文件名与其inode号码的对照表

df：列出文件系统的整体磁盘使用量； 

du：评估文件系统的磁盘使用量（常用在推估目录所占容量）
使用 hard link 设置链接文件时，磁盘的空间与 inode 的数目都不会改变
hard link 是有限制的： 

不能跨 Filesystem； 

不能 link 目录

对磁盘进行分区，以创建可用的 partition ； 

对该 partition 进行格式化 （format），以创建系统可用的 filesystem； 

若想要仔细一点，则可对刚刚创建好的 filesystem 进行检验； 

在 Linux 系统上，需要创建挂载点 （亦即是目录），并将他挂载上来
NAME：设备的文件名，会省略 /dev 等前导目录 

MAJ:MIN：分别是主要：次要设备代码！ 

RM：是否为可卸载设备 （removable device），如光盘、USB 磁盘等等 

SIZE：容量 

RO：是否为只读设备 

TYPE：是磁盘 （disk）、分区 （partition） 还是只读存储器 （rom） 等输出 

MOUTPOINT：挂载点
应该要通过 lsblk 或 blkid 先找到磁盘，再用 parted /dev/xxx print 来找出内部的分区表类型，之后 才用 gdisk 或 fdisk 来操作系统
Number：分区编号，1 号指的是 /dev/vda1 这样计算。 

Start （sector）：每一个分区的开始扇区号码位置 

End （sector）：每一个分区的结束扇区号码位置，与 start 之间可以算出分区的总容量

Size：就是分区的容量了 

Code：在分区内的可能的文件系统类型。Linux 为 8300，swap 为 8200。不过这个项目只是一个提 示而已，不见得真的代表此分区内的文件系统

Name：文件系统的名称等等

 格式化

# 第八章

gzip [-cdtv#] 文件名

-c ：将压缩的数据输出到屏幕上，可通过数据流重导向来处理；

-d ：解压缩的参数；

-t ：可以用来检验一个压缩文件的一致性～看看文件有无错误；

-v ：可以显示出原文件/压缩文件的压缩比等信息；

 zcat/zmore/zless 则可以读取纯文本文件被压缩后的压缩文件

bzip2 压缩比更大 时间久

xz 更大 更久

 tar 可以将多个目录或文件打包成

一个大文件，同时还可以通过 gzip/bzip2/xz 的支持，将该文件同时进行压缩

压 缩：tar -j<u>c</u>v -f filename.tar.bz2 要被压缩的文件或目录名称

查 询：tar -j<u>t</u>v -f filename.tar.bz2

解压缩：tar -j<u>x</u>v -f filename.tar.bz2 -C 欲解压缩的目录

 time 会显示程序运行的时间

xfsdump 除了可以进行文件系统的完整备份之外，还可以进行累积备份

xfsdump 的复原使用的是 xfsrestore 这个指令

dd

cpio与find搭配

# 第九章

vim程序编辑器

vi 共分为三种模式，分别是“一般指令模式”、“编辑模式”与“命令行命令模式”

一般指令模式： vi 打开一个文件就直接进入一般指令模式了

编辑模式：一般指令中按“i, I, o, O, a, A, r, R”等任何一个字母之后才会进入编辑模式

命令行命令模式：在一般模式当中，输入“ : / ? ”三个中的任何一个按钮，就可以将光标移动到最下面那一列

ESC退出

常用命令表

vim 的暂存盘、救援回复与打开时的警告讯息

目前主要的文书编辑软件都会有“回复”的功能，亦即当你的系统因为某些原因而导致类似死机的情况

时， 还可以通过某些特别的机制来让你将之前未储存的数据“救”回来vim 的额外功能看到画面的右下角有显示目前光标所在的行列号码，那么你的 vi 已经被 vim 所取代

多窗口功能:

在命令行界面输入“:sp {filename}”即可！那个 filename 可有可无， 如果想要在新窗口启动另一个文件，

就加入文件名，否则仅输入 :sp 时， 出现的则是同一个文件在两个窗口间！

 vim 的挑字补全功能
[ctrl]+x -> [ctrl]+n 通过目前正在编辑的这个“文件的内容文字”作为关键字，予以补齐

[ctrl]+x -> [ctrl]+f 以当前目录内的“文件名”作为关键字，予以补齐

[ctrl]+x -> [ctrl]+o 以扩展名作为语法补充，以 vim 内置的关键字，予以补齐

vim的环境设置与记录

vim中的中文编码问题

你在 Windows 系统

当中将文件编辑好之后，才上传到 Linux 系统，会容易发生错误问题。 而且，如果你在不同的系统之间复

制一些纯文本时，千万记得要使用 unix2dos 或 dos2unix 来转换一下断行格式

# 第十章

bash优点：

history   tab键 命令别名设置功能等

 查询指令是否为 Bash shell 的内置命令： type

shell的变量功能

变量的取用

&lt;==这里并没有任何数据～因为这个变量尚未被设置！是空的

VBird &lt;==出现了！因为这个变量已经被设置了！

变量的设置规则   略

取消 unsettle   eg：“unset myname”

在一般的状态下，父程序的自订变量是无法在子程序内使用的。但是通过 export 将变量

变成环境变量后，就能够在子程序下面应用

环境变量的功能

命令与历史命令 alias unalias   history

bash 的路径与指令搜寻顺序  配置文件

终端机的环境设置： stty, set

万能字符

数据流重导向

连续命令的下达可通过 ; && || 等符号来处理
管线命令的重点是：“管线命令仅会处理 standard output，对于 standard error output 会予以忽
略” “管线命令必须要能够接受来自前一个指令的数据成为 standard input 继续处理才行。”
